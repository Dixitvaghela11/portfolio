<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="/styles/loading.css">
    <title>Loading Animation | code_wars_official</title>
</head>
<body>
    <div class="loader">
        <svg viewBox="0 0 80 80">
            <circle id="test" cx="40" cy="40" r="32"></circle>
        </svg>
    </div>
    
    <div class="loader triangle">
        <svg viewBox="0 0 86 80">
            <polygon points="43 8 79 72 7 72"></polygon>
        </svg>
    </div>
    
    <div class="loader">
        <svg viewBox="0 0 80 80">
            <rect x="8" y="8" width="64" height="64"></rect>
        </svg>
    </div>
    <!--    Add Countdown Timer in the center 100%-->
    <div class="grid-background"></div>
    
    <div class="rings">
        <div class="ring"></div>
        <div class="ring"></div>
        <div class="ring"></div>
    </div>
    
    <div class="cursor"></div>
    <div class="cursor-follower"></div>
    
    <div class="decoration">
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <div class="countdown">
        <div class="countdown-number" data-text="0%">0%</div>
    </div>

    <script>
        
        const cursor = document.querySelector('.cursor');
        const cursorFollower = document.querySelector('.cursor-follower');
        const countdown = document.querySelector('.countdown');
        
        // Check if device is touch-enabled
        const isTouchDevice = () => {
            return (('ontouchstart' in window) ||
                    (navigator.maxTouchPoints > 0) ||
                    (navigator.msMaxTouchPoints > 0));
        }
        
        // Only add mouse effects if not a touch device
        if (!isTouchDevice()) {
            // Add mousemove event to document
            document.addEventListener('mousemove', (e) => {
                const mouseX = e.clientX;
                const mouseY = e.clientY;
                
                // Ensure cursor elements exist before manipulating
                if (cursor && cursorFollower) {
                    // Update cursor positions with requestAnimationFrame for smooth animation
                    requestAnimationFrame(() => {
                        // Main cursor
                        cursor.style.left = `${mouseX}px`;
                        cursor.style.top = `${mouseY}px`;
                        cursor.style.transform = 'translate(-50%, -50%)';
                        
                        // Follower cursor with delay
                        cursorFollower.style.left = `${mouseX}px`;
                        cursorFollower.style.top = `${mouseY}px`;
                        cursorFollower.style.transform = 'translate(-50%, -50%) scale(1)';
                    });
                }
                
                // Add hover effect for interactive elements
                document.querySelectorAll('a, button, .interactive').forEach(el => {
                    el.addEventListener('mouseenter', () => {
                        cursor.style.transform = 'translate(-50%, -50%) scale(0.5)';
                        cursorFollower.style.transform = 'translate(-50%, -50%) scale(1.5)';
                    });
                    
                    el.addEventListener('mouseleave', () => {
                        cursor.style.transform = 'translate(-50%, -50%) scale(1)';
                        cursorFollower.style.transform = 'translate(-50%, -50%) scale(1)';
                    });
                });
                
                // 3D effect for countdown
                if (countdown) {
                    const rect = countdown.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    const angleX = (mouseY - centerY) / window.innerHeight * 20;
                    const angleY = (mouseX - centerX) / window.innerWidth * 20;
                    
                    countdown.style.transform = `
                        translate(-50%, -50%)
                        rotateX(${-angleX}deg)
                        rotateY(${angleY}deg)
                        translateZ(20px)
                    `;
                }
            });
            
            // Add mouseleave event to document
            document.addEventListener('mouseleave', () => {
                cursor.style.opacity = '0';
                cursorFollower.style.opacity = '0';
            });
            
            // Add mouseenter event to document
            document.addEventListener('mouseenter', () => {
                cursor.style.opacity = '1';
                cursorFollower.style.opacity = '1';
            });
        }
        
        // Handle window resize
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                if (countdown) {
                    countdown.style.transform = 'translate(-50%, -50%)';
                }
            }, 250);
        });

        const countdownEl = document.querySelector('.countdown-number');
        let count = 0;
        
        const interval = setInterval(() => {
            count += 1;
            if (count <= 100) {
                countdownEl.textContent = count + '%';
                countdownEl.setAttribute('data-text', count + '%');
            }
            if (count >= 100) {
                clearInterval(interval);
            }
        }, 30); // 30ms * 100 steps = 3000ms = 3 seconds
    </script>
</body>
</html>